<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
  <meta name="theme-color" content="#317EFB"/>
  <title>How to create Google Tag Manager documentation with R</title>
  <meta property="og:title" content="How to create Google Tag Manager documentation with R" />
  <meta name="twitter:title" content="How to create Google Tag Manager documentation with R" />
  <meta name="description" content="To create digital data documentation can be a boring, but  useful endeavor. This R script helps you automate the process">
  <meta property="og:description" content="To create digital data documentation can be a boring, but  useful endeavor. This R script helps you automate the process">
  <meta name="twitter:description" content="To create digital data documentation can be a boring, but  useful endeavor. This R script helps you automate the process">
  <meta name="author" content="Martijn van Vreeden"/>
  <link href='https://martijnvv.github.io/personal_blog/img/favicon.ico' rel='icon' type='image/x-icon'/>
  <meta property="og:image" content="https://martijnvanvreeden.nl/img/GTM_R_integration.jpg" />
  <meta name="twitter:image" content="https://martijnvanvreeden.nl/img/GTM_R_integration.jpg" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@martijnvv" />
  <meta name="twitter:creator" content="@martijnvv" />
  <meta property="og:url" content="https://martijnvv.github.io/personal_blog/create-google-tag-manager-documentation-with-r/" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Martijn van Vreeden" />
  <meta name="google-site-verification" content="9jGR4dFHGBlfB9kcaGTSmzbtXMpxU3strfXQFQFHlkA" />
  <link href="https://fonts.googleapis.com" rel="preconnect" crossorigin>
  <link rel="dns-prefetch" href="https://fonts.googleapis.com">
  <link href="https://maxcdn.bootstrapcdn.com" rel="preconnect" crossorigin>
  <link rel="dns-prefetch" href="https://maxcdn.bootstrapcdn.com">  
  <link href="https://www.google-analytics.com" rel="preconnect" crossorigin>
  <link rel="dns-prefetch" href="https://www.google-analytics.com">  
<link href='https://www.googletagmanager.com' rel="preconnect" crossorigin>
  <link rel="dns-prefetch" href='https://www.googletagmanager.com'>  <script>
	window.dataLayer = window.dataLayer || [];
	window.dataLayer.push({
		'pagePublishDate': '2020-01-09',
		'pageModifiedDate': '2020-01-09','pageReadingTimeMinutes':  4 ,
		'pageReadingTimeSeconds': 183 ,
		'pageWordCount': 671 ,
		'pageFuzzyWordCount': 700 ,
		'pageKind': 'page',
		'pageId': '06b44cf5ac891b9ac2940917775f046d',
		'pageTitle': 'How to create Google Tag Manager documentation with R',
		'pagePermalink': 'https:\/\/martijnvv.github.io\/personal_blog\/create-google-tag-manager-documentation-with-r\/',
		'pageType': 'post',
		'pageTranslated':  false ,'pageAuthor': 'Martijn van Vreeden','pageCategory':'google tag manager','pageTags':'google tag manager|documentation|data governance','pageType2': 'post',
		'pageLanguage': 'en'
	 });
  </script>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-NMSG6Q');</script>
	

<meta name="generator" content="Hugo 0.110.0"><link rel="canonical" href="https://martijnvv.github.io/personal_blog/create-google-tag-manager-documentation-with-r/" />
  <script type="text/javascript">
          var stylesheet = document.createElement('link');
          stylesheet.href = 'https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css';
          stylesheet.rel = 'stylesheet';
          stylesheet.type = 'text/css';
          document.getElementsByTagName('head')[0].appendChild(stylesheet);
   </script> 
  <link rel="stylesheet" href="/css/main.css"/>
  <link href="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
    
  <script type="application/ld+json">
		{
			"@context":"http://schema.org/",
			"@type":"BlogPosting",
			"mainEntityOfPage":"https:\/\/martijnvv.github.io\/personal_blog\/create-google-tag-manager-documentation-with-r\/",
			"editor": "Martijn van Vreeden",
			"url":"https:\/\/martijnvv.github.io\/personal_blog\/create-google-tag-manager-documentation-with-r\/","headline":"How to create Google Tag Manager documentation with R","description":"To create digital data documentation can be a boring, but  useful endeavor. This R script helps you automate the process",
			"articleSection":"google tag manager",
			"timeRequired": "PT4M",
			"inLanguage" : "en",
			"wordCount":  671 ,
			"datePublished" : "2020-01-09T00:00:00",
			"dateModified" : "2020-01-09T00:00:00",
			"image":{
				"@type": "ImageObject",
				"url": "https:\/\/www.martijnvanvreeden.nl\/img\/logo.jpg",
				"name":"How to create Google Tag Manager documentation with R",
				"width": "450",
				"height": "450"
			},
			"publisher": {
				"@type": "Organization",
				"name": "Martijn van Vreeden's Blog",
				"logo": {
					"@type": "ImageObject",
					"url": "https:\/\/www.martijnvanvreeden.nl\/img\/logo.jpg",
					"height": "450",
					"width": "450"
				}
			},
			"author": {
				"@type":"Person",
				"name":"Martijn van Vreeden",
				"image":"https:\/\/www.martijnvanvreeden.nl\/img\/logo.jpg",
				"url":"https:\/\/www.martijnvanvreeden.nl",
				"description":"I’m an independent digital analyst, based in Amersfoort, the Netherlands. I have 10+ years experience in digital marketing and digital analytics, with a focus on leveraging digital data to grow companies.",
				"sameAs":["https:\/\/www.linkedin.com\/in\/martijnvanvreeden\/", "https:\/\/https://twitter.com\/martijnvv"]
			}
		}
  </script>
</head>


  <body>
  <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-NMSG6Q" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://martijnvv.github.io/personal_blog/">Martijn van Vreeden</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="About me" href="/personal_blog/about-me/">About me</a>
            </li>
          
        
          
            <li>
              <a title="Clients" href="/personal_blog/portfolio/">Clients</a>
            </li>
          
        
          
            <li>
              <a title="GitHub" href="https://github.com/martijnvv">GitHub</a>
            </li>
          
        
          
            <li>
              <a title="LinkedIn" href="https://www.linkedin.com/in/martijnvanvreeden/">LinkedIn</a>
            </li>
          
        
          
            <li>
              <a title="Twitter" href="https://twitter.com/martijnvvw">Twitter</a>
            </li>
          
        

        
      </ul>
    </div>

    <div class="avatar-container">
      <div class="avatar-img-border">
        
          <a title="Martijn van Vreeden" href="https://martijnvv.github.io/personal_blog/">
		 <figure>
			<picture>
				<source srcset="/img/martijn-van-vreeden.webp" type="image/webp">
		  		<img class="avatar-img" loading="lazy" defer src="/img/martijn-van-vreeden.jpg" alt="Martijn van Vreeden" height="100px" width="100px"/>
			</picture>
		</figure>	
          </a>
        
      </div>
    </div>

  </div>
</nav>

    

  
  
  




  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="post-heading">
                
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>


    <div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post" id="content-item">
		
        <img src="https://martijnvanvreeden.nl/img/GTM_R_integration.webp" alt="How to create Google Tag Manager documentation with R" class="img-title" />
        
	  
        


<div id="create-google-tag-manager-documentation-with-r" class="section level1">
<h1>Create Google Tag Manager documentation with R</h1>
<p>Creating digital data documentation can be a painstaking, boring, but extremely useful endeavor. Knowing what digital data is available to you and others can be helpful to understand the potential of your data set, as well as provide context to analysis, reporting and other ways to leverage data.</p>
<p>To take some of the effort out of creating documentation about the contents of your Google Tag Manager account, I have created a script that pulls data out of the environment and outputs a simple Excel file, which you can share with stakeholders.</p>
<p>If you are using the features available to you in Google Tag Manager, it takes hardly any effort to output the documentation and update it periodically.</p>
<div id="about-the-r-script" class="section level2">
<h2>About the R script</h2>
<p><a href="https://github.com/martijnvv/GTMDocumentationR">This R script</a> generates an automated output in easy-to-read Excel format of the contents of a GTM account, using R and the GTM API.</p>
</div>
<div id="usecases-for-this-script" class="section level2">
<h2>Usecases for this script</h2>
<p>The output is very useful when you are auditing a GTM account, or for other data governance purposes. It provides a format of the defined variables in GTM, including some additional contextual values. This has proven effective to share the type of data you are collecting with stakeholders in your organisation that don’t have access to GTM, or are not familiar with Google Tag Manager.</p>
<p>The following tabs are included in the Excel output:</p>
<ul>
<li>Summary tab, with most important information about the GTM account</li>
<li>Enabled builtin variables</li>
<li>Additional variables, including important contextual information</li>
<li>Overview of tags, including tag status, name and notes</li>
<li>List of triggers</li>
<li>List of users and user access level</li>
</ul>
</div>
<div id="r-packages-used" class="section level2">
<h2>R Packages used</h2>
<p>The packages I have used are:</p>
<ul>
<li><a href="https://cran.r-project.org/web/packages/googleAuthR/index.html">googleAuthR</a></li>
<li><a href="https://cran.r-project.org/web/packages/openxlsx/index.html">openxlsx</a></li>
</ul>
</div>
<div id="options-to-configure-before-running-the-script" class="section level2">
<h2>Options to configure before running the script</h2>
<p>In order for the script to run successfully on your GTM account, you need to update some parts of the script.</p>
<div id="get-google-tag-manager-api-credentials" class="section level3">
<h3>Get Google Tag Manager API credentials</h3>
<p>You need to provide access for the script to your Google Tag Manager account via the API. This requires you to provide an API client ID and client secret. To get this access, please go to the Google developers console and create a project: <a href="https://console.developers.google.com/flows/enableapi?apiid=tagmanager&amp;credential=client_key&amp;pli=1" class="uri">https://console.developers.google.com/flows/enableapi?apiid=tagmanager&amp;credential=client_key&amp;pli=1</a></p>
<p>You need to use these credentials and add them to the “api_data” file in this R project.</p>
</div>
<div id="add-the-company-name-to-the-script" class="section level3">
<h3>Add the company name to the script</h3>
<p>The company name will be included on the summary sheet of the documentation and is also part of the name of the Excel.</p>
<pre class="r"><code># Basic input for project -------------------------------------------------
projectName &lt;- &#39;Dummy inc&#39; #insert company name here for Excel output
Sys.Date() -&gt; date
xlsXFileName &lt;- paste0(projectName, &#39;_gtmDocumentation_&#39;,date,&#39;.xlsx&#39;)</code></pre>
</div>
<div id="get-your-gtm-container-id-and-gtm-account-id" class="section level3">
<h3>Get your GTM container ID and GTM account ID</h3>
<p>Once you have access to GTM via your R script, please provide a valid Google Tag Manager account ID and container ID for the GTM container you would like to run the script for. You can find these values in your Google Tag Manager UI in the admin section.</p>
<p>You can include the ID’s in the R script.</p>
<pre class="r"><code># Choose account_id -------------------------------------------------------
account_id &lt;- &quot;INSERT_ACCOUNT_ID&quot;

# Choose container from container_list ------------------------------------
container_id &lt;- &quot;INSERT_CONTAINER_ID&quot;</code></pre>
</div>
<div id="split-your-variable-notes-input-to-multiple-columns-optional" class="section level3">
<h3>Split your variable notes input to multiple columns (optional)</h3>
<p>With each item in GTM (variable, trigger, tag), you can add a note. This script pulls the information from the note for each corresponding item and splits the texts to separate columns based on an identifier. It is possible to setup these identifiers to provide more detailed documentation for each of the items in the documentation.</p>
<p>In this example, I split the notes section into 3 additional columns in the documentation:
* description
* example
* variable_setting</p>
<p>This is based on a split after the word “EXAMPLE:” and “TYPE”.</p>
<pre class="r"><code># optional to split the notes column in multiple columns
transform(variable_list, description=do.call(rbind, strsplit(variable.notes, &#39;EXAMPLE:&#39;, fixed=TRUE)), stringsAsFactors=F) -&gt; variable_list
transform(variable_list, type=do.call(rbind, strsplit(description.2, &#39;TYPE:&#39;, fixed=TRUE)), stringsAsFactors=F) -&gt; variable_list
names(variable_list)[names(variable_list) == &quot;description.1&quot;] &lt;-&quot;description&quot;
names(variable_list)[names(variable_list) == &quot;type.1&quot;] &lt;-&quot;example&quot;
names(variable_list)[names(variable_list) == &quot;type.2&quot;] &lt;-&quot;variable_setting&quot;</code></pre>
</div>
</div>
<div id="full-working-script-example" class="section level2">
<h2>Full working script example</h2>
<p>To find a full script and more details about the functionality, please check out <a href="https://github.com/martijnvv/GTMDocumentationR">my Github page</a>.</p>
<div class="figure">
<img src="https://martijnvanvreeden.nl/img/example_output.PNG" alt="" />
<p class="caption">Summary view</p>
</div>
</div>
</div>

      </article>
              
                <span class="post-meta" style="text-align:center">Tags: 
                  
                    #<a href="https://martijnvv.github.io/personal_blog/tags/google-tag-manager/" class="post-meta-tag-article">google tag manager</a>&nbsp;
                  
                    #<a href="https://martijnvv.github.io/personal_blog/tags/documentation/" class="post-meta-tag-article">documentation</a>&nbsp;
                  
                    #<a href="https://martijnvv.github.io/personal_blog/tags/data-governance/" class="post-meta-tag-article">data governance</a>&nbsp;
                  
                </span>
              
		
            <hr/>
            <section id="social-share">
              <div class="list-inline footer-links">
                

<div class="share-box">
    <ul class="share">
      
      <li>
        <a class="fs2" href="//twitter.com/share?url=https%3a%2f%2fmartijnvv.github.io%2fpersonal_blog%2fcreate-google-tag-manager-documentation-with-r%2f&amp;text=How%20to%20create%20Google%20Tag%20Manager%20documentation%20with%20R&amp;via=martijnvv" target="_blank" title="Share on Twitter" rel="noreferrer" aria-label="share article on twitter">
          <i class="icon-twitter"></i>
        </a>
      </li>
  
      
      <li>
        <a class="fs2" href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fmartijnvv.github.io%2fpersonal_blog%2fcreate-google-tag-manager-documentation-with-r%2f" target="_blank" title="Share on Facebook" rel="noreferrer" aria-label="share article on facebook">
          <i class="icon-facebook"></i>
        </a>
      </li>
  
      
      <li>
        <a class="fs2" href="//reddit.com/submit?url=https%3a%2f%2fmartijnvv.github.io%2fpersonal_blog%2fcreate-google-tag-manager-documentation-with-r%2f&amp;title=How%20to%20create%20Google%20Tag%20Manager%20documentation%20with%20R" target="_blank" title="Share on Reddit" rel="noreferrer" aria-label="share article on reddit">
          <i class="icon-reddit"></i>
        </a>
      </li>
  
      
      <li>
        <a class="fs2" href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fmartijnvv.github.io%2fpersonal_blog%2fcreate-google-tag-manager-documentation-with-r%2f&amp;title=How%20to%20create%20Google%20Tag%20Manager%20documentation%20with%20R" target="_blank" title="Share on LinkedIn" rel="noreferrer" aria-label="share article on linkedin">
          <i class="icon-linkedin"></i>
        </a>
      </li>
      </li>
    </ul>
  </div>
  
              </div>
            </section>
        
	  <ul class="pager blog-pager">
        
          <li class="previous">
            <a href="https://martijnvv.github.io/personal_blog/optimizing-the-youtube-shortcode-for-hugo/" data-toggle="tooltip" data-placement="top" title="Optimizing the Youtube Shortcode for Hugo">&larr; Previous Post</a>
          </li>
        
        
          <li class="next">
            <a href="https://martijnvv.github.io/personal_blog/10-ways-to-improve-your-hugo-website-performance/" data-toggle="tooltip" data-placement="top" title="10 Ways to improve your (Hugo) website performance">Next Post &rarr;</a>
          </li>
        
      </ul>

      
	  
    </div>
  </div>
</div>
    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
	            
        <ul class="list-inline text-center footer-links social_links">
		
              <li>
                <a href="https://twitter.com/martijnvv" title="Twitter" rel="noreferrer" aria-label="Twitter">
                  <span class="glyph fs1">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="glyph_config icon-twitter gl_inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://www.linkedin.com/in/martijnvanvreeden" title="LinkedIn" rel="noreferrer" aria-label="LinkedIn">
                  <span class="glyph fs1">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="glyph_config icon-linkedin gl_inverse"></i>
                  </span>
                </a>
              </li>
			<li>
                <a href="mailto:mail@martijnvanvreeden.nl" title="Email me" rel="noreferrer" aria-label="email me">
                  <span class="glyph fs1">
						<i class="fas fa-circle fa-stack-2x"></i>
						<i class="glyph_config icon-mail2 gl_inverse"></i>
                  </span>
                </a>
            </li>
        </ul>
        <p class="credits copyright text-muted">
              <a href="/cookie-policy/" rel="nofollow">Privacy policy</a>
          &nbsp;&bull;&nbsp;
          2023
          
            &nbsp;&bull;&nbsp;
            <a href="https://martijnvv.github.io/personal_blog/" rel="nofollow">Martijn van Vreeden</a>
          
        </p>
      </div>
    </div>
  </div>
</footer>
	<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
	<script src="https://martijnvv.github.io/personal_blog/js/main.js"></script>
	<script src="https://martijnvv.github.io/personal_blog/js/highlight.min.js"></script>
	<script src="https://martijnvv.github.io/personal_blog/js/purecookie.js"></script>
	<script> hljs.initHighlightingOnLoad(); </script>
	
	<noscript><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"></noscript>
  </body>
</html>

